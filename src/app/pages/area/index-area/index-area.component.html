<app-spinner></app-spinner>
<div class="toast toast-top toast-end" *ngIf="alert">
  <div class="alert alert-success">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-6 h-6 stroke-current shrink-0"
      fill="none"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
    <span>{{ alertMsg }}</span>
  </div>
</div>

<h1 class="mb-5 text-3xl font-bold">List of Area</h1>

<div class="flex justify-between my-8">
  <div class="relative w-1/5">
    <div
      class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
    >
      <svg
        class="w-4 h-4 text-gray-500"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 20 20"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
        />
      </svg>
    </div>
    <input
      [(ngModel)]="search"
      type="search"
      id="default-search"
      class="block w-full p-4 pl-10 text-sm text-gray-900 border-gray-300 rounded-lg bg-gray-50"
      placeholder="Search Area..."
    />
  </div>
  <a routerLink="/area/create" class="flex items-center btn">
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H13V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V13H8C7.44771 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11H11V8Z"
        fill="#0F0F0F"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM3.00683 12C3.00683 16.9668 7.03321 20.9932 12 20.9932C16.9668 20.9932 20.9932 16.9668 20.9932 12C20.9932 7.03321 16.9668 3.00683 12 3.00683C7.03321 3.00683 3.00683 7.03321 3.00683 12Z"
        fill="#0F0F0F"
      />
    </svg>
    Create new
  </a>
</div>
<div class="relative overflow-x-auto shadow-md sm:rounded-lg rounded-xl">
  <table class="w-full text-sm text-left text-gray-500">
    <thead class="text-xs text-gray-700 uppercase bg-gray-50">
      <tr>
        <th scope="col" class="px-6 py-3 text-center">No</th>
        <th scope="col" class="px-6 py-3 text-center w-[60%]">Name</th>
        <th scope="col" class="px-6 py-3 text-center">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let item of datas | search : search | paginate : config"
        class="bg-white border-b"
      >
        <th
          scope="row"
          class="px-6 py-4 font-medium text-center text-gray-900 whitespace-nowrap"
        >
          {{ item.index }}
        </th>
        <td class="px-6 py-4 text-center">{{ item.name }}</td>
        <td class="px-6 py-4 text-center">
          <div class="flex justify-center gap-2">
            <a
              routerLink="/area/{{ item.id }}/edit"
              class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-yellow-500 rounded-md hover:bg-yellow-600"
            >
              <svg
                class="w-5 h-5 mr-2"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="Complete">
                  <g id="edit">
                    <g>
                      <path
                        d="M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8"
                        fill="none"
                        stroke="#fff"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                      />

                      <polygon
                        fill="none"
                        points="12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8"
                        stroke="#fff"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                      />
                    </g>
                  </g>
                </g>
              </svg>
              Edit
            </a>
            <label
              (click)="getDataModal(item.id)"
              for="modal_delete"
              class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md cursor-pointer hover:bg-red-700"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 mr-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                />
              </svg>

              Delete
            </label>
          </div>
        </td>
      </tr>
      <tr *ngIf="!datas?.length">
        <td colspan="3" class="px-6 py-4 text-center font-semibold">No data found</td>
      </tr>
    </tbody>
  </table>
</div>
<div
  class="flex items-center justify-center my-5"
  *ngIf="datas?.length >= config.itemsPerPage"
>
  <pagination-template
    #p="paginationApi"
    [id]="config.id"
    (pageChange)="config.currentPage = $event"
  >
    <div class="flex gap-2 custom-pagination">
      <div class="pagination-previous">
        <!-- <span *ngIf="!p.isFirstPage()" (click)="p.previous()">
                          <
                        </span> -->
        <button
          (click)="p.previous()"
          [disabled]="p.isFirstPage()"
          [ngClass]="
            p.isFirstPage()
              ? 'text-gray-400 '
              : 'text-gray-700  hover:scale-105 active:scale-100 hover:bg-blue-100'
          "
          type="button"
          class="inline-flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium align-middle transition-all duration-300 bg-white rounded-md shadow-sm"
        >
          <svg
            class="w-3 h-3"
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            viewBox="0 0 16 16"
          >
            <path
              fill-rule="evenodd"
              d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"
            />
          </svg>
          Prev
        </button>
      </div>
      <div
        class="page-number px-2.5 cursor-pointer flex items-center rounded-lg hover:bg-slate-100"
        [ngClass]="
          p.getCurrent() === page.value
            ? 'font-semibold border-blue-100 border-4  '
            : ''
        "
        *ngFor="let page of p.pages"
        [class.current]="p.getCurrent() === page.value"
        (click)="p.setCurrent(page.value)"
      >
        <h1 *ngIf="p.getCurrent() !== page.value">
          {{ page.label }}
        </h1>
        <div *ngIf="p.getCurrent() === page.value">
          <h1>{{ page.label }}</h1>
        </div>
      </div>
      <div class="pagination-next">
        <button
          (click)="p.next()"
          type="button"
          [disabled]="p.isLastPage()"
          [ngClass]="
            p.isLastPage()
              ? 'text-gray-400'
              : 'text-gray-700  hover:scale-105 active:scale-100 hover:bg-blue-100'
          "
          class="inline-flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium align-middle transition-all bg-white rounded-md shadow-sm"
        >
          Next
          <svg
            class="w-3 h-3"
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            viewBox="0 0 16 16"
          >
            <path
              fill-rule="evenodd"
              d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"
            />
          </svg>
        </button>
      </div>
    </div>
  </pagination-template>
</div>

<input type="checkbox" id="modal_delete" class="modal-toggle" />
<div class="modal" *ngIf="dataModal">
  <div class="modal-box">
    <h3 class="text-lg font-bold">Alert!</h3>
    <p class="py-4">
      Are you sure delete <strong>{{ dataModal.name }}</strong> area?
    </p>
    <div class="modal-action">
      <label
        (click)="deleteData(dataModal.id)"
        for="modal_delete"
        class="btn-success btn"
        >Delete</label
      >
      <label for="modal_delete" class="btn btn-error">Cancel</label>
    </div>
  </div>
</div>
